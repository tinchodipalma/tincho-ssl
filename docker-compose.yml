version: '3'

networks:
  tincho:
    driver: bridge

services:
  tincho-svc:
    image: nginx:alpine
    restart: on-failure
    networks:
      - tincho

  letsencrypt:
    image: linuxserver/letsencrypt
    container_name: letsencrypt
    cap_add:
      - NET_ADMIN
    links:
      - tincho-svc
    volumes:
      - ./rootfs/config:/config
      - letsencrypt_config:/config
      - letsencrypt_certs:/config/etc/letsencrypt
    environment:
      # - PGID:<gid>
      # - PUID:<uid> 
      - URL
      - SUBDOMAINS
      - VALIDATION
      - TZ
      - EMAIL
    networks: 
      - tincho
    ports:
      - "443:443"
      - "80:80"

volumes:
  letsencrypt_certs: ~
  letsencrypt_config: ~